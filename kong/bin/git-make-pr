#!/usr/bin/env ruby

this_branch = `git rev-parse --abbrev-ref HEAD`.strip
merge_branch = `git config branch.#{this_branch}.merge`.strip

remote = `git config remote.origin.url`.strip.split(/:/)[1].gsub('.git', '')

url="https://github.com/#{remote}/compare/#{merge_branch}...#{this_branch}?expand=1"

exec("open #{url}")
